async function getValidTab(){const{activeTabId:a}=await chrome.storage.local.get("activeTabId");try{return(await chrome.tabs.get(a)).id}catch{return null}}async function onTabUpdated(a,t,e){const s=await getValidTab(),n=await chrome.storage.local.get(["scanTranslatorTargetLangEvent","scanTranslatorPanelEvent","scanTranslatorEnableCustomFontSize","scanTranslatorCustomFontSize"]);s===a&&("complete"===t.status&&"complete"===e.status&&e.url&&(n.scanTranslatorEnableCustomFontSize&&chrome.tabs.sendMessage(a,{scanTranslatorCustomFontSize:n.scanTranslatorCustomFontSize}),"show"===n.scanTranslatorPanelEvent&&chrome.tabs.sendMessage(a,{scanTranslatorPanelEvent:n.scanTranslatorPanelEvent,scanTranslatorTargetLangEvent:n.scanTranslatorTargetLangEvent})),t.url&&chrome.tabs.sendMessage(a,{resetOverlayEvent:!0})),"complete"===e.status&&e.url.includes("https://scan-translator.com")&&chrome.tabs.sendMessage(a,{storeLicenseKey:!0})}async function onTabActivated(){await getValidTab()}chrome.runtime.onInstalled.addListener((async a=>{"install"===a.reason?chrome.storage.local.set({showUpdate:!1,lastVersion:null}):"update"===a.reason&&chrome.storage.local.get(["lastVersion"],(a=>{chrome.storage.local.set({showUpdate:!1,lastVersion:void 0===a.lastVersion?null:a.lastVersion,blogUrl:"https://scan-translator.com/blog/devblog-release-1-0"})}))})),chrome.tabs.onUpdated.addListener(onTabUpdated),chrome.tabs.onActivated.addListener(onTabActivated);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJtYXBwaW5ncyI6IkFBbUJBQSxlQUFlQyxjQUNiLE1BQU1DLFlBQUVBLFNBQXNCQyxPQUFPQyxRQUFRQyxNQUFNQyxJQUFJLGVBQ3ZELElBRUUsYUFEa0JILE9BQU9JLEtBQUtELElBQUlKLElBQ3ZCTSxFQUdiLENBRkUsTUFDQSxPQUFPLElBQ1QsQ0FDRixDQUVBUixlQUFlUyxhQUFhQyxFQUFPQyxFQUFZQyxHQUM3QyxNQUFNQyxRQUFtQlosY0FDbkJhLFFBQWNYLE9BQU9DLFFBQVFDLE1BQU1DLElBQUksQ0FDM0MsZ0NBQ0EsMkJBQ0EscUNBQ0EsaUNBR0VPLElBQWVILElBRU8sYUFBdEJDLEVBQVdJLFFBQ0ksYUFBZkgsRUFBSUcsUUFDSkgsRUFBSUksTUFFQUYsRUFBTUcsb0NBQ1JkLE9BQU9JLEtBQUtXLFlBQVlSLEVBQU8sQ0FDN0JTLDZCQUE4QkwsRUFBTUssK0JBSUQsU0FBbkNMLEVBQU1NLDBCQUNSakIsT0FBT0ksS0FBS1csWUFBWVIsRUFBTyxDQUM3QlUseUJBQTBCTixFQUFNTSx5QkFDaENDLDhCQUErQlAsRUFBTU8saUNBS3ZDVixFQUFXSyxLQUNiYixPQUFPSSxLQUFLVyxZQUFZUixFQUFPLENBQUVZLG1CQUFtQixLQUt2QyxhQUFmVixFQUFJRyxRQUNKSCxFQUFJSSxJQUFJTyxTQUFTLGdDQUVqQnBCLE9BQU9JLEtBQUtXLFlBQVlSLEVBQU8sQ0FBRWMsaUJBQWlCLEdBRXRELENBR0F4QixlQUFleUIsdUJBQ1B4QixhQUNSLENBMUVBRSxPQUFPdUIsUUFBUUMsWUFBWUMsYUFBWTVCLE1BQU82QixJQUNyQixZQUFuQkEsRUFBUUMsT0FDVjNCLE9BQU9DLFFBQVFDLE1BQU0wQixJQUFJLENBQ3ZCQyxZQUFZLEVBQ1pDLFlBQWEsT0FFYSxXQUFuQkosRUFBUUMsUUFDakIzQixPQUFPQyxRQUFRQyxNQUFNQyxJQUFJLENBQUMsZ0JBQWlCNEIsSUFDekMvQixPQUFPQyxRQUFRQyxNQUFNMEIsSUFBSSxDQUN2QkMsWUFBWSxFQUNaQyxpQkFDeUJFLElBQXZCRCxFQUFPRCxZQUE0QixLQUFPQyxFQUFPRCxZQUNuREcsUUFBUyx3REFDWCxHQUNGLElBK0RKakMsT0FBT0ksS0FBSzhCLFVBQVVULFlBQVluQixjQUNsQ04sT0FBT0ksS0FBSytCLFlBQVlWLFlBQVlIIiwic291cmNlcyI6WyJzcmMvYmFja2dyb3VuZC9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjaHJvbWUucnVudGltZS5vbkluc3RhbGxlZC5hZGRMaXN0ZW5lcihhc3luYyAoZGV0YWlscykgPT4ge1xuICBpZiAoZGV0YWlscy5yZWFzb24gPT09ICdpbnN0YWxsJykge1xuICAgIGNocm9tZS5zdG9yYWdlLmxvY2FsLnNldCh7XG4gICAgICBzaG93VXBkYXRlOiBmYWxzZSxcbiAgICAgIGxhc3RWZXJzaW9uOiBudWxsLFxuICAgIH0pXG4gIH0gZWxzZSBpZiAoZGV0YWlscy5yZWFzb24gPT09ICd1cGRhdGUnKSB7XG4gICAgY2hyb21lLnN0b3JhZ2UubG9jYWwuZ2V0KFsnbGFzdFZlcnNpb24nXSwgKHJlc3VsdCkgPT4ge1xuICAgICAgY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KHtcbiAgICAgICAgc2hvd1VwZGF0ZTogZmFsc2UsXG4gICAgICAgIGxhc3RWZXJzaW9uOlxuICAgICAgICAgIHJlc3VsdC5sYXN0VmVyc2lvbiA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHJlc3VsdC5sYXN0VmVyc2lvbixcbiAgICAgICAgYmxvZ1VybDogJ2h0dHBzOi8vc2Nhbi10cmFuc2xhdG9yLmNvbS9ibG9nL2RldmJsb2ctcmVsZWFzZS0xLTAnLFxuICAgICAgfSlcbiAgICB9KVxuICB9XG59KVxuXG4vLyBHZXQgdGhlIHZhbGlkIHRhYiBJRFxuYXN5bmMgZnVuY3Rpb24gZ2V0VmFsaWRUYWIoKSB7XG4gIGNvbnN0IHsgYWN0aXZlVGFiSWQgfSA9IGF3YWl0IGNocm9tZS5zdG9yYWdlLmxvY2FsLmdldCgnYWN0aXZlVGFiSWQnKVxuICB0cnkge1xuICAgIGNvbnN0IHRhYiA9IGF3YWl0IGNocm9tZS50YWJzLmdldChhY3RpdmVUYWJJZClcbiAgICByZXR1cm4gdGFiLmlkXG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBudWxsXG4gIH1cbn1cbi8vIEhhbmRsZSB0YWIgdXBkYXRlc1xuYXN5bmMgZnVuY3Rpb24gb25UYWJVcGRhdGVkKHRhYklkLCBjaGFuZ2VJbmZvLCB0YWIpIHtcbiAgY29uc3QgdmFsaWRUYWJJZCA9IGF3YWl0IGdldFZhbGlkVGFiKClcbiAgY29uc3QgaXRlbXMgPSBhd2FpdCBjaHJvbWUuc3RvcmFnZS5sb2NhbC5nZXQoW1xuICAgICdzY2FuVHJhbnNsYXRvclRhcmdldExhbmdFdmVudCcsXG4gICAgJ3NjYW5UcmFuc2xhdG9yUGFuZWxFdmVudCcsXG4gICAgJ3NjYW5UcmFuc2xhdG9yRW5hYmxlQ3VzdG9tRm9udFNpemUnLFxuICAgICdzY2FuVHJhbnNsYXRvckN1c3RvbUZvbnRTaXplJyxcbiAgXSlcblxuICBpZiAodmFsaWRUYWJJZCA9PT0gdGFiSWQpIHtcbiAgICBpZiAoXG4gICAgICBjaGFuZ2VJbmZvLnN0YXR1cyA9PT0gJ2NvbXBsZXRlJyAmJlxuICAgICAgdGFiLnN0YXR1cyA9PT0gJ2NvbXBsZXRlJyAmJlxuICAgICAgdGFiLnVybFxuICAgICkge1xuICAgICAgaWYgKGl0ZW1zLnNjYW5UcmFuc2xhdG9yRW5hYmxlQ3VzdG9tRm9udFNpemUpIHtcbiAgICAgICAgY2hyb21lLnRhYnMuc2VuZE1lc3NhZ2UodGFiSWQsIHtcbiAgICAgICAgICBzY2FuVHJhbnNsYXRvckN1c3RvbUZvbnRTaXplOiBpdGVtcy5zY2FuVHJhbnNsYXRvckN1c3RvbUZvbnRTaXplLFxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBpZiAoaXRlbXMuc2NhblRyYW5zbGF0b3JQYW5lbEV2ZW50ID09PSAnc2hvdycpIHtcbiAgICAgICAgY2hyb21lLnRhYnMuc2VuZE1lc3NhZ2UodGFiSWQsIHtcbiAgICAgICAgICBzY2FuVHJhbnNsYXRvclBhbmVsRXZlbnQ6IGl0ZW1zLnNjYW5UcmFuc2xhdG9yUGFuZWxFdmVudCxcbiAgICAgICAgICBzY2FuVHJhbnNsYXRvclRhcmdldExhbmdFdmVudDogaXRlbXMuc2NhblRyYW5zbGF0b3JUYXJnZXRMYW5nRXZlbnQsXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNoYW5nZUluZm8udXJsKSB7XG4gICAgICBjaHJvbWUudGFicy5zZW5kTWVzc2FnZSh0YWJJZCwgeyByZXNldE92ZXJsYXlFdmVudDogdHJ1ZSB9KVxuICAgIH1cbiAgfVxuXG4gIGlmIChcbiAgICB0YWIuc3RhdHVzID09PSAnY29tcGxldGUnICYmXG4gICAgdGFiLnVybC5pbmNsdWRlcygnaHR0cHM6Ly9zY2FuLXRyYW5zbGF0b3IuY29tJylcbiAgKSB7XG4gICAgY2hyb21lLnRhYnMuc2VuZE1lc3NhZ2UodGFiSWQsIHsgc3RvcmVMaWNlbnNlS2V5OiB0cnVlIH0pXG4gIH1cbn1cblxuLy8gVXBkYXRlIHZhbGlkVGFiSWQgd2hlbiB0aGUgYWN0aXZlIHRhYiBjaGFuZ2VzXG5hc3luYyBmdW5jdGlvbiBvblRhYkFjdGl2YXRlZCgpIHtcbiAgYXdhaXQgZ2V0VmFsaWRUYWIoKVxufVxuXG4vLyBBZGQgbGlzdGVuZXJzXG5jaHJvbWUudGFicy5vblVwZGF0ZWQuYWRkTGlzdGVuZXIob25UYWJVcGRhdGVkKVxuY2hyb21lLnRhYnMub25BY3RpdmF0ZWQuYWRkTGlzdGVuZXIob25UYWJBY3RpdmF0ZWQpXG4iXSwibmFtZXMiOlsiYXN5bmMiLCJnZXRWYWxpZFRhYiIsImFjdGl2ZVRhYklkIiwiY2hyb21lIiwic3RvcmFnZSIsImxvY2FsIiwiZ2V0IiwidGFicyIsImlkIiwib25UYWJVcGRhdGVkIiwidGFiSWQiLCJjaGFuZ2VJbmZvIiwidGFiIiwidmFsaWRUYWJJZCIsIml0ZW1zIiwic3RhdHVzIiwidXJsIiwic2NhblRyYW5zbGF0b3JFbmFibGVDdXN0b21Gb250U2l6ZSIsInNlbmRNZXNzYWdlIiwic2NhblRyYW5zbGF0b3JDdXN0b21Gb250U2l6ZSIsInNjYW5UcmFuc2xhdG9yUGFuZWxFdmVudCIsInNjYW5UcmFuc2xhdG9yVGFyZ2V0TGFuZ0V2ZW50IiwicmVzZXRPdmVybGF5RXZlbnQiLCJpbmNsdWRlcyIsInN0b3JlTGljZW5zZUtleSIsIm9uVGFiQWN0aXZhdGVkIiwicnVudGltZSIsIm9uSW5zdGFsbGVkIiwiYWRkTGlzdGVuZXIiLCJkZXRhaWxzIiwicmVhc29uIiwic2V0Iiwic2hvd1VwZGF0ZSIsImxhc3RWZXJzaW9uIiwicmVzdWx0IiwidW5kZWZpbmVkIiwiYmxvZ1VybCIsIm9uVXBkYXRlZCIsIm9uQWN0aXZhdGVkIl0sInZlcnNpb24iOjMsImZpbGUiOiJiYWNrZ3JvdW5kLkhBU0hfUkVGX2ZiNGEyYzY0YWVjYjY3N2IuanMubWFwIn0=
